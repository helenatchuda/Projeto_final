<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
 
    <title>Gestão de Finanças Pessoal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="./style.css">
    <script src="./script.js" defer></script>
</head>
<body>

    <div class="dashboard-container">
        <div id="sidebar" class="sidebar">
            <a href="#" class="close-btn" id="closeBtn">×</a>

            <div class="app-logo">
                <div class="title-group">
                    <i class="fas fa-chart-pie"></i>
                    <span>Gestão de Finanças</span>
                </div>
                <small>Gestão Financeira</small>
            </div>

            <div class="user-profile">
                <div class="user-avatar" id="userAvatar">Ad</div>
                <span id="userName">Admin</span>
                <small id="userEmail"></small>
            </div>

            <nav>
                <ul>
                    <li>
                        <a id="toggleUserMenu"><i class="fas fa-user-circle"></i> Utilizador <i class="fas fa-caret-down"></i></a>
                        <div class="submenu" id="userSubmenu">
                            <a id="loginLink">Login</a>
                            <a id="logoutLink">Logout</a>
                            <a id="registerLink">Criar Conta</a>
                        </div>
                    </li>
                    <li class="active"><a id="dashboardLink"><i class="fas fa-th-large"></i> Dashboard</a></li>
                    <li><a id="despesasLink"><i class="fas fa-wallet"></i> Despesas</a></li>
                    <li><a id="receitasLink"><i class="fas fa-funnel-dollar"></i> Receitas</a></li>
                    <li><a id="categoryLink"><i class="fas fa-folder-open"></i> Categorias</a></li>
                    <li><a id="relatorioLink"><i class="fas fa-chart-bar"></i> Relatórios</a></li>
                </ul>
            </nav>
            <div style="padding: 20px; margin-top: auto; font-size: 0.8em; color: #aaa;">
                © 2025 FinanceApp
            </div>
        </div>

        <div id="main-content" class="main-content">
            <button id="openBtn" class="open-btn">☰ Menu</button>
            
            <section id="page-dashboard" class="page-content active-page">
                <header class="page-header">
                    <div>
                        <h1>Dashboard</h1>
                        <p>Visão geral das finanças</p>
                    </div>
                </header>

                <section class="summary-cards">
                    <div class="card dashboard-balance">
                        <i class="fas fa-balance-scale"></i>
                        <h4>Saldo Atual</h4>
                        <p id="dashboardSaldo">0.00 €</p>
                    </div>
                    <div class="card dashboard-income">
                        <i class="fas fa-arrow-up"></i>
                        <h4>Total Receitas (Mês)</h4>
                        <p id="dashboardReceitas">0.00 €</p>
                    </div>
                    <div class="card dashboard-expense">
                        <i class="fas fa-arrow-down"></i>
                        <h4>Total Despesas </h4>
                        <p id="dashboardDespesas">0.00 €</p>
                    </div>
                </section>
                
                <div class="dashboard-charts">
                    <div class="chart-placeholder">
                        Gráfico de Despesas por Categoria (Implementar com Chart.js/etc.)
                    </div>
                    <div class="chart-placeholder">
                        Gráfico de Balanço Mensal
                    </div>
                </div>

                <section class="data-table-container" style="margin-top: 30px;">
                    <h3>Últimas 5 Transações</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Tipo</th>
                                <th>Descrição</th>
                                <th>Valor</th>
                            </tr>
                        </thead>
                        <tbody id="lastTransactionsBody">
                            </tbody>
                    </table>
                </section>
            </section>

            <section id="page-despesas" class="page-content">
                <header class="page-header">
                    <div>
                        <h1>Gestão de Despesas</h1>
                        <p>Registe e visualize todas as suas despesas</p>
                    </div>
                    <button class="add-btn" id="addDespesaBtn">
                        <i class="fas fa-plus"></i> Nova Despesa
                    </button>
                </header>

                <section class="summary-cards">
                    <div class="card total">
                        <i class="fas fa-euro-sign"></i>
                        <h4>Total Despesas</h4>
                        <p id="totalDespesasMes">0.00 €</p>
                    </div>
                    <div class="card expense">
                       <i class="fas fa-list-alt"></i>
                       <h4>Nº de Transações</h4>
                         <p id="countDespesasMes">0</p>
                    </div>
                    <div class="card income">
                        <i class="fas fa-chart-line">€</i>
                        <h4>Maior Despesa</h4>
                        <p id="maiorDespesa">0.00 €</p>
                    </div>
                </section>

                <section class="data-table-container">
                    <h3>Lista Completa de Despesas</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Descrição</th>
                                <th>Categoria</th>
                                <th>Valor</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="despesasTableBody">
                            </tbody>
                    </table>
                </section>
            </section>

            <section id="page-receitas" class="page-content">
                <header class="page-header">
                    <div>
                        <h1>Gestão de Receitas</h1>
                        <p>Registe e visualize todas as suas receitas</p>
                    </div>
                    <button class="add-btn" id="addReceitaBtn">
                        <i class="fas fa-plus"></i> Nova Receita
                    </button>
                </header>
                
                <section class="summary-cards">
                    <div class="card total">
                        <i class="fas fa-euro-sign"></i>
                        <h4>Total Receitas</h4>
                        <p id="totalReceitasMes">0.00 €</p>
                    </div>
                    <div class="card income">
                        <i class="fas fa-list-alt"></i>
                        <h4>Nº de Transações</h4>
                        <p id="countReceitasMes">0</p>
                    </div>
                    <div class="card expense">
                        <i class="fas fa-chart-line"></i>
                        <h4>Maior Receita</h4>
                        <p id="maiorReceita">0.00 €</p>
                    </div>
                </section>

                <section class="data-table-container">
                    <h3>Lista Completa de Receitas</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Descrição</th>
                                <th>Categoria</th>
                                <th>Valor</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="receitasTableBody">
                            </tbody>
                    </table>
                </section>
            </section>

            <section id="page-categorias" class="page-content">
                <header class="page-header">
                    <div>
                        <h1>Categorias</h1>
                        <p>Gerencie suas categorias de receitas e despesas</p>
                    </div>
                    <button class="add-btn" id="addCategoryBtn">
                        <i class="fas fa-plus"></i> Nova Categoria
                    </button>
                </header>

                <section class="summary-cards">
                    <div class="card total">
                        <i class="fas fa-folder"></i>
                        <h4>Total de Categorias</h4>
                        <p id="totalCategoriesCount">0</p>
                    </div>
                    <div class="card expense">
                        <i class="fas fa-minus-circle"></i>
                        <h4>Categorias de Despesas</h4>
                        <p id="expenseCategoriesCount">0</p>
                    </div>
                    <div class="card income">
                        <i class="fas fa-plus-circle"></i>
                        <h4>Categorias de Receitas</h4>
                        <p id="incomeCategoriesCount">0</p>
                    </div>
                </section>

                <section class="category-lists-container">
                    <div class="category-list expense-list">
                        <h3>Categorias de Despesas</h3>
                        <ul id="expenseCategoriesList"></ul>
                    </div>
                    <div class="category-list income-list">
                        <h3>Categorias de Receitas</h3>
                        <ul id="incomeCategoriesList"></ul>
                    </div>
                </section>
            </section>

            <section id="page-relatorios" class="page-content">
                <header class="page-header">
                    <div>
                        <h1>Relatórios</h1>
                        <p>Análise detalhada das suas finanças</p>
                    </div>
                    <button class="add-btn" id="gerarRelatorioBtn">
                        <i class="fas fa-download"></i> Exportar PDF
                    </button>
                </header>

                <section class="filtros-relatorio">
                    <div class="filtro-group">
                        <label for="periodoRelatorio">Período:</label>
                        <select id="periodoRelatorio">
                            <option value="mes_atual">Mês Atual</option>
                            <option value="mes_anterior">Mês Anterior</option>
                            <option value="trimestre">Último Trimestre</option>
                            <option value="semestre">Último Semestre</option>
                            <option value="ano">Ano Atual</option>
                            <option value="personalizado">Personalizado</option>
                        </select>
                    </div>
                    
                    <div class="filtro-group" id="filtroDataPersonalizada" style="display: none;">
                        <label for="dataInicio">Data Início:</label>
                        <input type="date" id="dataInicio">
                        
                        <label for="dataFim">Data Fim:</label>
                        <input type="date" id="dataFim">
                    </div>
                    
                    <div class="filtro-group">
                        <label for="tipoTransacao">Tipo de Transação:</label>
                        <select id="tipoTransacao">
                            <option value="todas">Todas</option>
                            <option value="receitas">Apenas Receitas</option>
                            <option value="despesas">Apenas Despesas</option>
                        </select>
                    </div>
                    
                    <button class="btn-filtrar" id="aplicarFiltros">
                        <i class="fas fa-filter"></i> Aplicar Filtros
                    </button>
                </section>

                <section class="estatisticas-relatorio">
                    <div class="card-relatorio">
                        <i class="fas fa-chart-line"></i>
                        <h4>Total Movimentado</h4>
                        <p id="totalMovimentado">0.00 €</p>
                    </div>
                    <div class="card-relatorio">
                        <i class="fas fa-arrow-up"></i>
                        <h4>Total Receitas</h4>
                        <p id="totalReceitasRelatorio">0.00 €</p>
                    </div>
                    <div class="card-relatorio">
                        <i class="fas fa-arrow-down"></i>
                        <h4>Total Despesas</h4>
                        <p id="totalDespesasRelatorio">0.00 €</p>
                    </div>
                    <div class="card-relatorio">
                        <i class="fas fa-balance-scale"></i>
                        <h4>Saldo Final</h4>
                        <p id="saldoFinalRelatorio">0.00 €</p>
                    </div>
                </section>

                <section class="data-table-container">
                    <h3>Transações do Período</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Tipo</th>
                                <th>Descrição</th>
                                <th>Categoria</th>
                                <th>Valor</th>
                            </tr>
                        </thead>
                        <tbody id="transacoesRelatorioBody">
                        </tbody>
                    </table>
                </section>

                <div class="graficos-relatorio">
                    <div class="grafico-container">
                        <h4>Distribuição por Categoria</h4>
                        <div class="chart-placeholder" id="graficoCategorias">
                            Gráfico de pizza por categoria
                        </div>
                    </div>
                    <div class="grafico-container">
                        <h4>Evolução Mensal</h4>
                        <div class="chart-placeholder" id="graficoEvolucao">
                            Gráfico de linha mensal
                        </div>
                    </div>
                </div>

                <section class="resumo-categorias">
                    <h3>Resumo por Categoria</h3>
                    <div class="categorias-grid" id="resumoCategorias">
                    </div>
                </section>
            </section>
        </div>
    </div>

    <!-- POPUP DE LOGIN -->
    <div id="loginpopup" class="popup-overlay">
        <div class="modal">
            <header>
                <h2 class="popup__title">Login</h2>
                <button class="closeModal" data-modal="loginpopup">&times;</button>
            </header>
            <form class="popup__form form" novalidate>
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input
                        type="email"
                        id="loginEmail"
                        class="form__input form__input-email"
                        placeholder="seu@email.com"
                        required
                    />
                    <span class="form__error" id="loginEmail-error" aria-live="polite"></span>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input
                        type="password"
                        id="loginPassword"
                        class="form__input form__input-password"
                        placeholder="••••••••"
                        required
                        minlength="6"
                    />
                    <span class="form__error" id="loginPassword-error" aria-live="polite"></span>
                </div>
                <button type="submit" class="popup__save-button">
                    Entrar
                </button>
                <div class="form-footer">
                    <p>Não tem conta? <a href="#" id="goToRegister">Crie uma conta</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- POPUP DE REGISTRO -->
    <div id="registerpopup" class="popup-overlay">
        <div class="modal">
            <header>
                <h2 class="popup__title">Criar Conta</h2>
                <button class="closeModal" data-modal="registerpopup">&times;</button>
            </header>
            <form class="popup__form form" novalidate>
                <div class="form-group">
                    <label for="registerName">Nome Completo</label>
                    <input
                        type="text"
                        id="registerName"
                        class="form__input form__input-userName"
                        placeholder="Seu nome"
                        required
                        minlength="2"
                        maxlength="40"
                    />
                    <span class="form__error" id="registerName-error" aria-live="polite"></span>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input
                        type="email"
                        id="registerEmail"
                        class="form__input form__input-email"
                        placeholder="seu@email.com"
                        required
                    />
                    <span class="form__error" id="registerEmail-error" aria-live="polite"></span>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input
                        type="password"
                        id="registerPassword"
                        class="form__input form__input-password"
                        placeholder="••••••••"
                        required
                        minlength="6"
                        maxlength="200"
                    />
                    <span class="form__error" id="registerPassword-error" aria-live="polite"></span>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Confirmar Password</label>
                    <input
                        type="password"
                        id="registerConfirmPassword"
                        class="form__input form__input-password"
                        placeholder="••••••••"
                        required
                        minlength="6"
                        maxlength="200"
                    />
                    <span class="form__error" id="registerConfirmPassword-error" aria-live="polite"></span>
                </div>
                <button type="submit" class="popup__save-button">
                    Criar Conta
                </button>
                <div class="form-footer">
                    <p>Já tem uma conta? <a href="#" id="goToLogin">Faça login</a></p>
                </div>
            </form>
        </div>
    </div>
    
    <!-- MODAL DE CATEGORIA -->
    <div id="categoryModal" class="modal-overlay">
        <div class="modal">
            <header>
                <h2 id="categoryModalTitle">Nova Categoria</h2>
                <button class="closeModal" data-modal="categoryModal">&times;</button>
            </header>
            <form id="categoryForm">
                <label for="categoryName">Nome da Categoria:</label>
                <input type="text" id="categoryName" required>
                <label for="categoryType">Tipo:</label>
                <select id="categoryType" required>
                    <option value="expense">Despesa</option>
                    <option value="income">Receita</option>
                </select>
                <label for="categoryColor">Cor (Hex):</label>
                <input type="color" id="categoryColor" value="#6a1b9a">
                <button type="submit" id="saveCategoryBtn">Guardar Categoria</button>
                <input type="hidden" id="categoryId">
            </form>
        </div>
    </div>

    <!-- MODAL DE TRANSAÇÃO -->
    <div id="transactionModal" class="modal-overlay">
        <div class="modal">
            <header>
                <h2 id="transactionModalTitle">Nova Transação</h2>
                <button class="closeModal" data-modal="transactionModal">&times;</button>
            </header>
            <form id="transactionForm">
                <label for="transactionDate">Data:</label>
                <input type="date" id="transactionDate" required>
                <label for="transactionDescription">Descrição:</label>
                <input type="text" id="transactionDescription" required>
                <label for="transactionValue">Valor:</label>
                <input type="number" id="transactionValue" step="0.01" min="0.01" required>
                <label for="transactionCategory">Categoria:</label>
                <select id="transactionCategory" required>
                </select>
                <button type="submit" id="saveTransactionBtn">Guardar Transação</button>
                <input type="hidden" id="transactionId">
                <input type="hidden" id="transactionTypeHidden">
            </form>
        </div>
    </div>
    
</body>
</html>